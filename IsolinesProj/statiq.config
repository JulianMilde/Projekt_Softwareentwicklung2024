using Statiq.Common;
using Statiq.Markdown;

public class MyConfig : Configurator
{
    public override void Configure(IDictionary<string, object> settings)
    {
        // Einstellungen f체r Statiq
        settings[Keys.InputFiles] = "Program.cs, CsvReader.cs, ScalarField.cs"; // Spezifische Auswahl der Dateien
        settings[Keys.UseScriptNames] = true;

        // Pipeline zur Generierung der README.md
        Pipelines.Add("ReadMePipeline",
            new ExecuteConfig(Config.FromDocument((doc, ctx) =>
            {
                var content = new StringBuilder();

                // Titel und Einf체hrung
                content.AppendLine("# Isolinienprogramm");
                content.AppendLine("Dieses Programm erzeugt Isolinienkarten basierend auf Skalarfeldern.");

                // Verwendung
                content.AppendLine("## Verwendung");
                content.AppendLine("1. Geben Sie den Pfad zur CSV-Datei ein.");
                content.AppendLine("2. Starten Sie das Programm, um die Isolinienkarte zu generieren.");

                // Beispielhafter Code-Schnipsel
                content.AppendLine("```csharp");
                content.AppendLine("static async Task Main(string[] args)");
                content.AppendLine("{");
                content.AppendLine("    // Code hier...");
                content.AppendLine("}");
                content.AppendLine("```");

                // Hinweis zur Installation von Abh채ngigkeiten
                content.AppendLine("## Installation");
                content.AppendLine("Stellen Sie sicher, dass Sie .NET 8.0.x installiert haben.");
                content.AppendLine("```bash");
                content.AppendLine("dotnet build");
                content.AppendLine("dotnet run");
                content.AppendLine("```");

                return ctx.CreateDocument("README.md", content.ToString());
            })),
            new RenderMarkdown()
        );

        // Ausgabepfad f체r die README.md
        settings[Keys.OutputPath] = "README.md";
    }
}
